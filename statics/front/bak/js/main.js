/*! ISweek main app | Steven <wangwen1220#gmail.com> 2014-06-06 */
seajs.config({paths:{jqpath:"jquery/jquery/1.8.0"},alias:{$:"jqpath/jquery.js","$-debug":"jqpath/jquery-debug.js",jquery:"jqpath/jquery.js","jquery-debug":"jqpath/jquery-debug.js","jquery-smartfloat":"steven/jquery-smartfloat/1.3.0/jquery-smartfloat","jquery-imglazyload":"steven/jquery-imglazyload/1.2.0/jquery-imglazyload",jqzoom:"steven/jqzoom/2.3.0/jqzoom","jqzoom.css":"steven/jqzoom/2.3.0/jqzoom-debug.css",dialog:"atans/artDialog/6.0.0/dialog",slide:"arale/switchable/1.0.2/slide",tabs:"arale/switchable/1.0.2/tabs",select:"arale/select/0.9.9/select","select.css":"alice/select/1.0.2/select.css",validator:"arale/validator/0.9.7/validator",widget:"arale/widget/1.1.1/widget",upload:"arale/upload/1.1.1/upload","seajs-style":"seajs/seajs-style/1.0.2/seajs-style",modernizr:"gallery/modernizr/2.7.1/modernizr","es5-safe":"gallery/es5-safe/0.9.2/es5-safe",json:"gallery/json/1.0.3/json"},map:[],preload:["modernizr",Function.prototype.bind?"":"es5-safe",this.JSON?"":"json"]}),seajs.use(["$","select","select.css","jquery-imglazyload","jqzoom","jqzoom.css"],function(a,b){var c=!!window.ActiveXObject,d=c&&!window.XMLHttpRequest,e="placeholder"in document.createElement("input");a.fn.extend({maxHeight:function(a){return a?this.each(function(){this.style.height=this.scrollHeight>a-1?a+"px":"auto"}):this.css("max-height")},maxWidth:function(a){return a?this.each(function(){this.style.height=this.clientWidth>a-1?a+"px":"auto"}):this.css("max-width")},minWidth:function(a){return a?this.each(function(){this.style.height=this.clientWidth<a?a+"px":"auto"}):this.css("min-width")}}),a(function(){var f=a("#search"),g=(a("#nav"),a("#main"),a("#sidebar"));a("#js-select").length&&new b({trigger:"#js-select",triggerTpl:'<a><span data-role="trigger-content"></span><i></i></a>'}).on("change",function(){var a=f.find(".search-panel").width()-20,b=f.find(".select-wrap").outerWidth();f.find(".kw").width(a-b)}).on("disabledChange",function(){var a=f.find(".search-panel").width()-20,b=f.find(".select-wrap").outerWidth();f.find(".kw").width(a-b)}).render(),e||a(document).on({focus:function(){var b=a(this),c=this.placeholder||this.defaultValue;b.addClass("focus").removeClass("placeholder"),this.value===c&&(this.value="")},blur:function(){var b=a(this),c=this.placeholder||this.defaultValue;b.removeClass("focus"),""===this.value&&(this.value=c),c===this.value&&b.addClass("placeholder")}},".js-placeholder").find(".js-placeholder").trigger("blur"),g.on("click",".catlist i",function(){var b=a(this);c?b.next(".sublist").toggleClass("fn-hide"):b.next(".sublist").stop().slideToggle(),b.closest("li").toggleClass("unfold"),b.text("+"===b.text()?"â€“":"+")}).on("click",".catlist .trigger",function(){var b=a(this),d=b.children(".arrow"),e=d.hasClass("arrow-up");c?b.next(".sublist").toggleClass("fn-hide"):b.next(".sublist").stop().slideToggle(),b.closest("li").toggleClass("unfold"),d[e?"removeClass":"addClass"]("arrow-up")[e?"addClass":"removeClass"]("arrow-down")}).on("click",".catlist .sublist dt",function(){c?a(this).nextUntil("dt").stop().toggleClass("fn-hide"):a(this).nextUntil("dt").slideToggle(200)});var h=a("#js-proimg");h.on("click",".thumbs img",function(){var b=a(this).parent().index(),c=(a(this),h.find(".imgs li")),d=c.eq(b).find(".lazy");c.hide().eq(b).fadeIn(),d.attr("src")!==d.data("src")&&d.attr("src",d.data("src"))}).find(".jqzoom").each(function(){a(this).jqzoom({imgSrc:a("img",this).data("src"),title:!1,zoomWidth:400,preloadImages:!1})}),a("img.lazy").imglazyload({attr:"data-src"}),d&&(a("#main .proshow-bd .prolist-item .title").maxHeight(54),a("#main .proshow-bd .prolist-item .description").maxHeight(70))}),a(window).load(function(){if(d)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}})});